<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title></title>
    <style>
    img, label {
      display: block;
    }
    </style>
  </head>

  <body>
    <label>RGB: <input id=rgb value=0055BF /></label>
    <img src=colortest.png></img>
    <script>
    //https://stackoverflow.com/a/58426404/223456
    function RGBToHSL(r,g,b) {
      // Find greatest and smallest channel values
      let cmin = Math.min(r,g,b),
          cmax = Math.max(r,g,b),
          delta = cmax - cmin,
          h = 0,
          s = 0,
          l = 0

      // Calculate hue
      // No difference
      if (delta === 0)
        h = 0
      // Red is max
      else if (cmax === r)
        h = ((g - b) / delta) % 6
      // Green is max
      else if (cmax === g)
        h = (b - r) / delta + 2
      // Blue is max
      else
        h = (r - g) / delta + 4

      h = Math.round(h * 60)

      // Make negative hues positive behind 360Â°
      if (h < 0)
          h += 360

      // Calculate lightness
      l = (cmax + cmin) / 2

      // Calculate saturation
      s = delta === 0 ? 0 : delta / (1 - Math.abs(2 * l - 1))

      return [h, s, l]
    }

    function hexToRGB(h) {
      h = h.replace('#', '')

      let r = parseInt(h[0] + h[1], 16)
      let g = parseInt(h[2] + h[3], 16)
      let b = parseInt(h[4] + h[5], 16)

      return [r/255, g/255, b/255]
    }

    const update = () => {
      let [r, g, b] = hexToRGB(rgb.value)
      let [h, s, l] = RGBToHSL(r, g, b)

      // Apply rotation from sepia
      h -= 40
      h = h % 360

      document.querySelector('img').style.filter = `sepia(1) hue-rotate(${h}deg) saturate(${s*5}) contrast(1.0) brightness(${l+.3})`
    }

    document.querySelectorAll('input').forEach(el => {
      el.addEventListener('input', update)
    })

    update()

    </script>
  </body>
</html>
